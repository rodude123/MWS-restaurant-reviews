{"version":3,"sources":["sw.js"],"names":["urlsToCache","cacheName","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","keys","cacheNames","Promise","all","filter","cName","startsWith","map","delete","respondWith","match","request","response","fetch","put","clone","status","Response","headers","Content-Type","catch","data","action","skipWaiting"],"mappings":"AAAA,IAAIA,aACJ,IACA,YACA,wBACA,iBACA,wBACA,iBACA,eAEIC,UAAY,qBAChBC,KAAKC,iBAAiB,UAAW,SAASC,GAExCA,EAAMC,UAEJC,OAAOC,KAAKN,WAAWO,KAAK,SAASC,GAEnC,OAAOA,EAAMC,OAAOV,kBAK1BE,KAAKC,iBAAiB,SAAU,SAASC,GAEvCA,EAAMC,UAEJC,OAAOK,OAAOH,KAAK,SAASI,GAE1B,OAAOC,QAAQC,IAEbF,EAAWG,OAAO,SAASC,GAEzB,OAAOA,EAAMC,WAAW,cAAgBD,GAASf,YAChDiB,IAAI,SAASF,GAEd,OAAOP,MAAMU,OAAOH,WAO9Bd,KAAKC,iBAAiB,QAAS,SAASC,GAEtCA,EAAMgB,YAEJd,OAAOC,KAAKN,WAAWO,KAAK,SAASC,GAEnC,OAAOA,EAAMY,MAAMjB,EAAMkB,SAASd,KAAK,SAAUe,GAE/C,OAAOA,GAAYC,MAAMpB,EAAMkB,SAASd,KAAK,SAASe,GAGpD,OADAd,EAAMgB,IAAIrB,EAAMkB,QAASC,EAASG,SACX,KAAnBH,EAASI,OAEJ,IAAIC,SAAS,gKAClBC,SAAUC,eAAgB,eAGvBP,IACNQ,MAAM,WAEP,OAAO,IAAIH,SAAS,sLAChBC,SAAUC,eAAgB,wBAQxC5B,KAAKC,iBAAiB,UAAW,SAASC,GACd,gBAAtBA,EAAM4B,KAAKC,QACb/B,KAAKgC","file":"sw.js","sourcesContent":["var urlsToCache = [\r\n'/',\r\n'js/idb.js',\r\n'js/indexController.js',\r\n'js/dbhelper.js',\r\n'js/restaurant_info.js',\r\n'css/styles.css',\r\n'/index.html'\r\n];\r\nvar cacheName = \"rReviews-static-v4\";\r\nself.addEventListener('install', function(event) \r\n{\r\n  event.waitUntil\r\n  (\r\n    caches.open(cacheName).then(function(cache) \r\n    {\r\n      return cache.addAll(urlsToCache);\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('active', function(event) \r\n{\r\n  event.waitUntil\r\n  (\r\n    caches.keys().then(function(cacheNames) \r\n    {\r\n      return Promise.all\r\n      (\r\n        cacheNames.filter(function(cName) \r\n        {\r\n          return cName.startsWith('rReviews-') && cName != cacheName;\r\n        }).map(function(cName) \r\n        {\r\n          return cache.delete(cName);\r\n        })\r\n      )\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('fetch', function(event)\r\n{\r\n  event.respondWith\r\n  (\r\n    caches.open(cacheName).then(function(cache) \r\n    {\r\n      return cache.match(event.request).then(function (response) \r\n      {\r\n        return response || fetch(event.request).then(function(response) \r\n        {\r\n          cache.put(event.request, response.clone());\r\n          if (response.status == 404) \r\n          {\r\n            return new Response(`<div style=\"position:absolute;top:50%;left:50%;width:200px;height:200px;margin:-100px 0 0 -100px;font-size:1.5em;\"><strong>Page not found 404</strong></div>`, {\r\n              headers: {\"Content-Type\": \"text/html\"}\r\n            });\r\n          }\r\n          return response;\r\n        }).catch(function() \r\n        {\r\n          return new Response(`<div style=\"position:absolute;top:50%;left:50%;width:200px;height:200px;margin:-100px 0 0 -100px;font-size:1.5em;\"><strong>Page not found, you appear to be offline</strong></div>`, {\r\n              headers: {\"Content-Type\": \"text/html\"}\r\n            });\r\n        });\r\n      });\r\n    })\r\n  );\r\n});\r\n\r\nself.addEventListener('message', function(event) {\r\n  if (event.data.action === 'skipWaiting') {\r\n    self.skipWaiting();\r\n  }\r\n});"]}